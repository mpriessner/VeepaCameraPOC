# Veepai Network Configuration and Device Connection

This document is a translation of `flutter sdk参数使用说明.pdf`.

---

## 1. Device QR Code Information (for WiFi devices)

- **On-device QR Code Content:** `{"ACT":"Add","ID":"ZYLX0092354DSTM","WiFi":"15","S":"0"}`
  - **ACT:** Ignore
  - **ID:** Device VUID
  - **wifi:** Device network type. See list below for values.
  - **S:** Indicates if the QR code is static. If 'S' exists, it's dynamic.

- **Network Config QR Code (Generated by phone):**
  - **Static QR:** `{"BS":"e0d462e663b0","P":"1111111111","U":"12965091","RS":"vstarcam123"}`
    - **BS:** Router MAC address (optional, requires location permission)
    - **P:** Router password
    - **u:** Unique user ID (can be empty)
    - **RS:** Router SSID (required)
    - **A:** Region (1: Mainland, 2: Asia, 3: America, 4: Europe)

---

## 2. Device Connection Process

### 2.1 Create Object
```dart
CameraDevice mDevice = CameraDevice(String id, String name, String username, String password, String model)
```
- **id:** Device ID from the label on the camera body.
- **name:** Device name.
- **username:** Login username for the device (**admin**, cannot be changed).
- **password:** Device password (**factory default is 888888**, can be changed after connecting).
- **model:** Device model (e.g., 4g/wifi).

### 2.2 Connect Device
```dart
var connectState = await mDevice.connect();
```
- **Result `CameraConnectState` enum:**
  - `connecting`: Connecting...
  - `logging`: Logging in...
  - `connected`: Online
  - `timeout`: Connection timeout
  - `disconnect`: Disconnected
  - **`password`**: **Password error**
  - `maxUser`: Too many users watching
  - `offline`: Offline
  - `illegal`: Illegal device
  - `none`: No state

### 2.3 Read/Write Data
- Use `writeCgi` to send a CGI command and `waitCommandResult` to receive the corresponding data (e.g., waiting for `cmd == 24577` for status).

### 2.4 Video Request
- `mDevice.startStream` to send a video request.
- `AppPlayerController` to create the player (see demo).

### 2.5 API Key/Secret
- For API requests, use your own `AccessKey` and `SecretKey`. Contact Veepai business or technical support to obtain them.

---

## 3. Android Proguard Configuration
```
-keep class com.vstarcam.**{*;}
-keep class com.veepai.**{*;}
```
---

## 4. Notes
- The demo provides one implementation method. You can implement the functions yourself using the library and Dart files.
- Permissions like location, camera, storage, microphone, and notifications need to be handled by third-party plugins.

---

## Camera Body QR Code "WiFi" Type Value Explanation

- **0, 1, 6, 17, 18, 19:** Sonic wave configuration
- **2, 8, 13:** AP configuration (with/without internet-free viewing mode)
- **3:** Wired connection, LAN search
- **4:** WiFi AP socket
- **5:** Manual UID entry
- **9, A:** Bluetooth configuration
- **15, 20, 25, 26:** 4G camera
- **21, 22, 23, 24:** WiFi camera (long power / low power) with QR code scanning on the phone
- **28:** NVR, App scans NVR body code
